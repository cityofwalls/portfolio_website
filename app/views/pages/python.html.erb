<!DOCTYPE html>
<html>
  <!--<head>-->
  <!--  <title>Python Projects | Jesse Battalino</title>-->
  <!--</head>-->
  <!--<body>-->
  <!--  <h1>Python Stuff</h1>-->
  <!--  <p>-->
  <!--    will go here.-->
  <!--    <div></div>-->
  <!--    <a href='http://www.codeskulptor.org/#user44_mE6uJQaqW2bKCW6.py' onclick='CodeSkulptor.CSModel("R"); return false;'>Flappy Bird</a>-->
  <!--  </p>-->
  <!--  <div></div>-->
  <!--</body>-->
  
  <head> 
  
    <%= javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" %>
    <%= javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" %>
    <%= javascript_include_tag "https://maps.googleapis.com/maps/api/js" %>
    <%= javascript_include_tag "https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js" %>
    <%= javascript_include_tag "https://py3.codeskulptor.org/vendor/skulpt.min.js" %>
    <%= javascript_include_tag "https://py3.codeskulptor.org/vendor/skulpt-stdlib.js" %>
    <%= javascript_include_tag "https://py3.codeskulptor.org/vendor.js" %>
    <%= javascript_include_tag "codeskulptor-compressed" %>
    <%= javascript_include_tag "https://maps.googleapis.com/maps-api-v3/api/js/34/15/common.js" %>
    <%= javascript_include_tag "https://maps.googleapis.com/maps-api-v3/api/js/34/15/util.js" %>
    
    <%= stylesheet_link_tag    'python_style', media: 'all', 'data-turbolinks-track': 'reload' %>
    
    <title>Python Projects | Jesse Battalino</title>
    
  </head>
  
  <body>
    
    <form>
      <textarea id="helloWorld" class='helloWorld' readonly>
print("hello, world")
print("hello, world")
print("hello, world")
print("hello, world")
print("hello, world")
      </textarea><br />
      <button type='button' onclick="runit('helloWorld')">Run</button>
    </form>
    <pre id="output"></pre> 
    <div id="canvas"></div>
    
    <script>
    // output functions are configurable.  This one just appends some text
    // to a pre element.
    function outf(text) { 
        var mypre = document.getElementById("output"); 
        mypre.innerHTML = mypre.innerHTML + text; 
    } 
    function builtinRead(x) {
        if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
                throw "File not found: '" + x + "'";
        return Sk.builtinFiles["files"][x];
    }
    // Here's everything you need to run a python program in skulpt
    // grab the code from your textarea
    // get a reference to your pre element for output
    // configure the output function
    // call Sk.importMainWithBody()
    function runit(elementID) { 
       var prog = document.getElementById(elementID).value; 
       var mypre = document.getElementById("output"); 
       mypre.innerHTML = ''; 
       Sk.pre = "output";
       Sk.configure({output:outf, read:builtinRead}); 
       (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'canvas';
       var myPromise = Sk.misceval.asyncToPromise(function() {
           return Sk.importMainWithBody("<stdin>", false, prog, true);
       });
       myPromise.then(function(mod) {
           console.log('success');
       },
           function(err) {
           console.log(err.toString());
       });
    } 
    </script>
  </body>
</html>